service: cw-cl-template-node

plugins:
  - serverless-offline
  - serverless-deployment-bucket

provider:
  name: aws
  stage: prod
  runtime: nodejs16.x
  apiGateway:
    restApiId: bh8xeay84j # REST API resource ID. Default is generated by the framework
    restApiRootResourceId: xthrxnr375 # Root resource, represent as / path
  deploymentBucket:
    name: cw-cl-template-node-bucket
    serverSideEncryption: AES256

functions:
  main:
    name: cw-cl-template-node
    handler: app/src/lambda.handler
    vpc:
      securityGroupIds:
        - sg-082eeb8800226bd8a
      subnetIds:
        - subnet-09913575e4dc1d3f0
        - subnet-0e8254f179219cd08
    events:
      - http:
          method: ANY
          path: /cw-cl-template-node
      - http:
          method: ANY
          path: '/cw-cl-template-node/{proxy+}'

custom:
  logRetentionInDays: 60
  optimize:
    external: ['swagger-ui-dist']
  serverless-offline:
    httpPort: 4000
    websocketPort: 4001
    lambdaPort: 4002
