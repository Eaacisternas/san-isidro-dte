service: cw-cl-template-node

plugins:
  - serverless-offline

provider:
  name: aws
  stage: dev
  runtime: nodejs16.x
  apiGateway:
    restApiId: 7kbpkhvigl # REST API resource ID. Default is generated by the framework
    restApiRootResourceId: glttrr2j6k # Root resource, represent as / path

functions:
  main:
    handler: app/src/lambda.handler
    vpc:
      securityGroupIds:
        - sg-0c4e4e55916e5347b
      subnetIds:
        - subnet-0dd55035aff3e9329
        - subnet-0ea26ff639698c90e
    events:
      - http:
          method: ANY
          path: /bff
      - http:
          method: ANY
          path: '/bff/{proxy+}'

custom:
  optimize:
    external: ['swagger-ui-dist']
  serverless-offline:
    httpPort: 4000
    websocketPort: 4001
    lambdaPort: 4002
